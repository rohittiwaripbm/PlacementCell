<% useLayout=true; %>

    <div class="container mt-5">
        <h1 class="text-center mb-4">Scheduled Interviews</h1>
        <table class="table table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Company Name</th>
                    <th>Student</th>
                    <th>Student Mobile</th>
                    <th>Student Email</th>
                    <th>Interview Date</th>
                    <th>Result</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% interviews.forEach(interview=> { %>
                    <tr>
                        <td>
                            <%= interview.companyName %>
                        </td>
                        <td>
                            <%= interview.studentId.studentName %>
                        </td>
                        <td>
                            <%= interview.studentId ? interview.studentId.studentMob || 'N/A' : 'N/A' %>
                        </td>
                        <td>
                            <%= interview.studentId ? interview.studentId.studentEmail || 'N/A' : 'N/A' %>
                        </td>
                        <td>
                            <%= (interview.InterviewDate != null) ? interview.InterviewDate.toISOString().split('T')[0] : "N/A" %>
                        </td>
                        <!-- <td><%= interview.result %></td> -->
                        <td>
                            <form id="updateForm" method="POST" action="/a/update/<%= interview._id %>">
                            <select class="form-control" name="result" id="result">
                                <option value="pass" <% if (interview.result === 'pass') { %> selected <% } %>>Pass</option>
                                <option value="fail" <% if (interview.result === 'fail') { %> selected <% } %>>Fail</option>
                                <option value="on hold" <% if (interview.result === 'on hold') { %> selected <% } %>>On Hold</option>
                                <option value="didn't attempt" <% if (interview.result === 'didn\'t attempt') { %> selected <% } %>>Didn't Attempt</option>
                            </select>
                        </td>
                        <td>
                                <!-- Hidden input to carry the selected result value -->
                                <!-- <input type="hidden" name="selectedResult" id="selectedResult" value="<%= interview.result %>"> -->
                                <button type="submit" class="btn btn-primary btn-sm">Update</button>
                            </form>
                        </td>
                    </tr>
                    <% }); %>
            </tbody>
        </table>
    </div>

